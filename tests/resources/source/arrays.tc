/*
 0
 TEST 2D ARRAY OK
 TEST STRUCT ARRAY OK
 TEST DOUBLE PASS ARRAY OK
*/
void test(int s) {
    if (s) print_s((char*)"OK");
    else print_s((char*)"FAIL");
}

struct pair {
    int x;
    int y;
};

struct foo {
    char a;
    int x;
    char b;
    char c[3];
    int y;
};

void skip(int a[3]) {
    a[2] = a[1] * 2;
}

void hop(int a[3]) {
    a[1] = a[0] * 2;
    skip(a);
}

void main() {
    print_s((char*)"TEST 2D ARRAY ");
    {
        int i;
        int j;
        int a[4][5];
        i = 0;
        while (i < 4) {
            j = 0;
            while (j < 5) {
                if ((i == 0) && (j == 2)) a[i][j] = 1;
                else a[i][j] = 0;
                j = j + 1;
            }
            i = i + 1;
        }
        test(a[0][2] == 1);
    }

    print_s((char*)"\nTEST STRUCT ARRAY ");
    {
        struct pair p[3];
        int i; int success;
        i = 0;
        success = 1;
        while (i < 3) {
            p[i].x = 2 * i;
            p[i].y = 2 * i + 1;
            i = i + 1;
        }
        i = 0;
        while (i < 3) {
            success = success && p[i].x == 2 * i && p[i].y == 2 * i + 1;
            i = i + 1;
        }
        test(success);
    }

    print_s((char*)"\nTEST DOUBLE PASS ARRAY ");
    {
        int a[3];
        a[0] = 1;
        hop(a);
        test(a[0] == 1 && a[1] == 2 && a[2] == 4);
    }
}
